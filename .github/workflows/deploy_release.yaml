#a git hub action to deploy to repository 'releases' sections
name: ShellScriptUtils - deploy release
run-name: $${{ github.author }} is deploying a release
on:
  tags:
    - 'v*'

jobs:
  prepare-release:
    name: Deploy release
    uses: ./.github/workflows/shared/package_files.yaml
    with:
      #create a name: ShellScriptUtils-v<tag>
      destination-filename: ShellScriptUtils-${{ github.ref }}
        
  deploy-release:
    name: release
    uses: actions/create-release@v1
    with:
      draft: false
      prerelease: false
      release_name: ${{ steps.version.outputs.version }}
      tag_name: ${{ github.ref }}
      body_path: CHANGELOG.md
    env:
      GITHUB_TOKEN: ${{ github.token }}
